<!--pages/user/home/home.wxml-->
<cu-custom bgColor="bg-gradual-blue">
  <view slot="content">个人中心</view>
</cu-custom>
<!-- 用户信息显示块 -->
<view class="UCenter-bg">
  <block wx:if="{{!hasUserInfo}}">
    <!-- 微信头像 -->
    <view class="padding">
      <view class="cu-avatar round xl" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big1000.jpg);">
        <!-- 性别 -->
        <view class="cu-tag badge {{index%2==0?'cuIcon-female bg-pink':'cuIcon-male bg-blue'}}"></view>
      </view>
    </view>
    <!-- 登录了就显示欢迎您 -->
    <view class="text-xl" style="color:white;">
      微信昵称
    </view>
    <!-- 授权微信登录按钮 -->
    <view class="grid padding-sm" bindtap="onLogin">
      <view class="margin-tb-sm text-center">
        <button class="cu-btn round bg-green">授权微信登录</button>
      </view>
    </view>
  </block>
  <block wx:else>
    <!-- 微信头像 -->
    <view class="padding">
      <view class="cu-avatar round xl" style="background-image:url({{userInfo.avatarUrl}});">
        <!-- 性别 -->
        <view class="cu-tag badge {{index%2==0?'cuIcon-female bg-pink':'cuIcon-male bg-blue'}}"></view>
      </view>
    </view>
    <!-- 登录了就显示欢迎您 -->
    <view class="text-xl" style="color:white;">
      {{userInfo.nickName}}
    </view>
  </block>
  <image src="/images/wave.gif" mode="scaleToFill" class="gif-wave"></image>
</view>
<!-- 功能块 -->
<view class="grid col-3 bg-white padding-sm">
  <view wx:for="{{iconList}}" wx:key="icon" wx:if="{{index<iconList.length}}">
    <navigator class="padding-sm radius-social text-center light" url="{{item.url}}">
      <view class='cuIcon-{{item.icon}}  text-{{item.color}}'>
        <view class="cu-tag badge" wx:if="{{item.badge!=0}}">
          <block wx:if="{{item.badge!=1}}">{{item.badge>99?"99+":item.badge}}</block>
        </view>
      </view>
      <view class="text-lg">{{item.name}}</view>
    </navigator>
  </view>
</view>
<!-- 功能列表 -->
<view class="cu-list menu card-menu margin-top-sm margin-bottom-xl shadow-lg radius">
  <view wx:for="{{menuItems}}" wx:key="id" class="cu-item arrow" bindtap="{{item.handler}}" data-url="{{item.url}}">
    <button class="cu-btn content">
      <text class="{{item.iconClass}}"></text>
      <text class="text-grey">{{item.label}}</text>
    </button>
  </view>
</view>
<!-- 底部版权声明 -->
<import src="/pages/template/copyright.wxml" />
<view class="margin-top">
  <template is="copyright"></template>
</view>